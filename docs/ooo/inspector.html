<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!--SEO--><title>JinyDev | 객체지향 프로그래밍</title>
            <meta name="title" content="객체지향 프로그래밍" /><meta name="keyword" content="jinyphp, php, 객체지향, oop, class" /><!--부트스트랩4-->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
        <style>
            img {
                max-width:100%;
            }
        </style>

        <link rel="stylesheet" href="/assets/highlight.css">
        <link rel="stylesheet" href="/assets/style.css">

        <script data-ad-client="ca-pub-3321560028329475" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        
    </head>
    <body>
        <!--네비게이션--><!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand" href="/">JinyDev</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="/php">PHP</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://mysql.jiny.dev">Mysql</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://git.jiny.dev">Git</a>
          </li>
        </ul>
      </div>
    </div>
</nav><br>

<div class="container">
    <nav><nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">Home</a></li>
        <!--breadcrumb loop--></ol>    
</nav></nav>
</div>

<!-- Page Content -->
<div class="container">
    <div class="row">

        <!-- Post Content Column -->
        <div class="col-lg-9">
            <section>
                <p>PHP4-Doc Comments</p>

<ol>
  <li>
    <h1 id="phpdoc-블록">PHPDoc 블록</h1>
  </li>
</ol>

<p>프로그램의 완전 처음배우는 독자가 아니라면 언어에서 제공하는 주석의 개념을 잘 알고 있을 것입니다.</p>

<p>PHP는 소스의 가독성과 이해를 쉽게 하기 위해서 주석 기능을 제공합니다. PHP주석 또한 다른 언어들과 유사하게 한 줄 처리 주석 // 과 여러 줄 처리 주석 /* */ 두가지 모두 지원을 합니다.</p>

<p>주석은 소스코드의 이해를 돕고, 여러 사람들과 코드를 공유함과 동시에 설명을하는데 매우 유용한 시스템입니다. 경험이 많은 개발자 일수록 주석문을 잘 사용을 합니다.</p>

<h1 id="021-주석">02.1 주석</h1>

<p>PHP는 일반적인 코드설명 주석보다 좀더 향상된 주석 시스템을 제공합니다. 
일반적으로 여러 줄의 주석문을 작성하는 /*와 유사하지만, /**로 시작을 합니다.
이를 다른 이름으로 PHP Docs라고 합니다.</p>

<p>PHP는 이렇게 소스 코드내에 작성한 주석문을 스스로 읽어서 검사를 할 수 있는 특별한 클래스를 제공합니다. 소스코드의 주석을 분석하여 코드의 메타 데이터를 생성합니다.</p>

<h1 id="022-doc-주석-예제">02.2 Doc 주석 예제</h1>
<p>그럼 소스코드 내에서 주석을 이용한 메타데이터 표기하는 방법에 대해서 알아보도록 합니다.</p>

<p>다음은 클래스 내에서 PHP Docs를 적용한 예제 파일 입니다.
예제파일: meta_01.php
&lt;?php
class Controller
{
	/**
	* @readwrite
	*/
	protected $_view;</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="syntax"><code>/**
* @once
*/
public function authenticate()
{
	// 코드작성부분
} }
</code></pre></div></div>

<p>위의 파일에는 하나의 클래스가 선언이 되어 있습니다. 클래스는 프로퍼티와 매소드가 하나씩 선언되어 있습니다. 이와 같이 /**로 표기되 주석을 가지고 있습니다.</p>

<p>선언한 $_view 프로퍼티 변수는 protected 속성으로 설정되어 외부에서 접근을 할 수는 없습니다. 별도의 getter/setter를 만들어 같이 사용할 것입니다. 또한 프로퍼티를 특별하게 읽기/쓰기/읽기쓰기 등의 특별한 용도로  제한을 하고 싶을 경우도 있을 것입니다.</p>

<p>이때, Doc 주석을 통하여 속성을 추가로 지정할 수 있습니다. 추가 속성을 통하여프로퍼티의 접근과 동작을 제어할 수 있습니다.</p>

<p>메소드도 호출과 실행을 제한할 수 있는 속성을 부여 하고 싶을 경우도 있을 것입니다. Doc 주석을 이용하여 매소드를 이전에 실행된 것을 확인하여 중복실행이 되지 않도록 제한할 수도 있습니다.</p>

<p>이처럼 주석을 통하여 메타 데이터를 생성하고 효과적으로 적요할 수 있습니다.</p>

<p>02.3 Inspector
이처럼 추가적인 속성을 주석으로 통하여 지정을 할 수 있습니다. 소스코드안에 있는 주석을 통하여 메타데이터를 생성합니다. 메타데이터는 키와 값을 한쌍으로 가지고 있습니다.</p>

<p>주석을 통하여 메타 데이터를 추출하기 위해서는 별도의 처리 로직이 필요로 합니다. 이러한 처리 로직을 Inspector라고 합니다.</p>

<p>Inspector 처리 로직은 소스 코드내에서 주석 내용을 읽어 올수 있는 특별한 크래스 ReflectionClass를 사용합니다. 다음 예제는 Inspector 처리를 위한 예제 입니다.</p>

<p>예제코드: inspector.php
namespace Framework
{
use Framework\ArrayMethods as ArrayMethods;
use Framework\StringMethods as StringMethods;</p>

<p>class Inspector
{
protected $_class;
protected $_meta = array(
“class” =&gt; array(),
“properties” =&gt; array(),
“methods” =&gt; array()
);</p>

<p>protected $_properties = array();
protected $_methods = array();</p>

<p>public function __construct($class)
{
$this-&gt;_class = $class;
}</p>

<p>protected function _getClassComment()
{
$reflection = new \ReflectionClass($this-&gt;_class);
return $reflection-&gt;getDocComment();
}</p>

<p>protected function _getClassProperties()
{
$reflection = new \ReflectionClass($this-&gt;_class);
return $reflection-&gt;getProperties();
}</p>

<p>protected function _getClassMethods()
{
$reflection = new \ReflectionClass($this-&gt;_class);
return $reflection-&gt;getMethods();
}</p>

<p>protected function _getPropertyComment($property)
{
$reflection = new \ReflectionProperty($this-&gt;_class, $property);
return $reflection-&gt;getDocComment();
}</p>

<p>protected function _getMethodComment($method)
{
$reflection = new \ReflectionMethod($this-&gt;_class, $method);
return $reflection-&gt;getDocComment();
}</p>

<p>}
}</p>

<p>PHP의 리플렉션 클래스는 Doc 주석의 문자열을 가지고 올 수 있습니다.</p>

<p>클래스의 속성 및 매서드 목록을 가지고 옵니다.</p>

<p>만일 문자열값만 읽어오기를 원한다면 _getClassComment (), _getPropertyComment () 및 _getMethodComment () 메서드를 public으로 만들 수 있습니다.</p>

<p>02.4 _parse()추가
PHP 주석 구분을 분석하기 위한 _parse() 매소드를 Inspector 클래스 안에 하나더생성을 합니다.</p>

<p>protected function <em>parse($comment)
{
$meta = array();
$pattern = “(@[a-zA-Z]+\s*[a-zA-Z0-9, ()</em>]*)”;
$matches = StringMethods::match($comment, $pattern);</p>

<p>if ($matches ! = null) {
foreach ($matches as $match) {
$parts = ArrayMethods::clean(
ArrayMethods::trim(
StringMethods::split($match, “[\s]”, 2)
)
);</p>

<p>$meta[$parts[0]] = true;
if (sizeof($parts) &gt; 1) {
$meta[$parts[0]] = ArrayMethods::clean(
ArrayMethods::trim(
StringMethods::split($parts[1], “,”)
)
);
}
}
}</p>

<p>return $meta;
}</p>

<p>내부 _parse () 메소드는 매우 간단한 정규식을 사용하여 키 / 값 쌍을 일치시킵니다.</p>

<p>_get … Meta () 메소드에 의해 리턴 된 Doc Comment 문자열 내. 이 작업은 StringMethods :: match () 메서드를 사용하여 수행합니다.</p>

<p>모든 경기를 반복하며 키 / 값으로 나눕니다.</p>

<p>값 구성 요소를 찾지 못하면 키 값을 true로 설정합니다. @readwrite 또는 @once와 같은 플래그 키에 유용합니다.</p>

<p>값 구성 요소를 찾으면 값을 나눈 값 배열을 키에 할당합니다.</p>

<p>마지막으로 키 / 값 연상 배열을 반환합니다.</p>

<p>이러한 내부 메소드는 코드 2-12의 public 메소드에 의해 사용되며, 구문 분석 된 Doc Comment 문자열 데이터를 리턴하는 데 사용될 것이다.</p>

<p>02.1 PHP Documentor 시작하기</p>

<p>PHP는 소스상에 있는 /** 로 시작하는 코드를 추가하고 구분할 수 있습니다.
주로 메소드나 프로퍼티에 적용하여 같이 많이 사용합니다.</p>

<p>@param
@throws
@return
@var 
등 여러종류가 있습니다.</p>

<p>PHPDoc 블록은 Inspector 기능을 구현을 통하여 주석문장을 인식합니다.</p>

<p>====</p>

<p>&lt;?php
include “ArrayMethods.php”;
include “StringMethods.php”;
include “Inspector.php”;</p>

<p>include “Base.php”;</p>

<p>class Car extends Framework\Base
{
/**</p>
<ul>
  <li>@readwrite
*/
protected $_color;</li>
</ul>

<p>/**</p>
<ul>
  <li>$write
*/
protected $_model;
}</li>
</ul>

<p>$car = new Car();</p>

<p>// 프러퍼티 $_color에 값을 설정합니다.
$car-&gt;setColor(“Red”);</p>

<p>// 설정한 프로퍼티의 값을 읽어옵니다.
echo $car-&gt;getColor();</p>

<p>필요한 클래스파일들을 먼저 include로 결합을 합니다. 
클래스 Car는 Framework\Base를 상속받습니다. Protected로 설정된 프로퍼티 $_color에 값을 설정을 합니다. 하지만 $_color는 외부 접근이 제한되어 있습니다.</p>

<p>접근을 시도할 경우 Framework\Base의 __call() 매직 메서드가 호출하게 됩니다. Framework\Base 클래스는 초기화로 Inspector 클래스의 인스턴스를 하나 미리 만들어 놓습니다.</p>


            </section>            
        </div>

        <!-- Sidebar Column -->
        <div class="col-md-3">
            <aside><ul class="list-group">
    <li class="list-group-item"><a href="/object">객체지향</a></li>
    <li class="list-group-item"><a href="/class">클래스</a></li>
</ul>
<br>

<ul class="list-group">
    <li class="list-group-item"><a href="/pattern">디자인패턴</a></li>
    <li class="list-group-item">리팩토링</li>
</ul>

<br>
</aside>
            
        </div>

    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
        <footer>  <!-- Footer -->
  <footer class="py-3 bg-dark">
    <div class="container">
      <p class="m-0 text-center text-white">Copyright &copy; jinydev 2017~2020</p>
    </div>
    <!-- /.container -->
  </footer></footer>  
        
        <!--부트스트랩4-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-160048106-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'UA-160048106-1');
        </script>

    </body>

</html>